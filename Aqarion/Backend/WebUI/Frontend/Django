

***

## 1. Project layout

```text
aqarionz_backend/
  manage.py
  pyproject.toml           # or requirements.txt
  .env                     # env vars (never commit)
  aqarionz_backend/
    __init__.py
    settings/
      __init__.py
      base.py
      dev.py
      prod.py
    urls.py
    asgi.py
    wsgi.py
  core/                    # shared utilities
    __init__.py
    models.py              # if you need global models
    utils.py
    permissions.py
    pagination.py
  graph/                   # “brains + matter + signals” graph API
    __init__.py
    apps.py
    models.py
    serializers.py
    views.py
    urls.py
  agents/                  # multi-agent + governance
    __init__.py
    apps.py
    models.py
    serializers.py
    views.py
    urls.py
  telemetry/               # logs, metrics
    __init__.py
    apps.py
    models.py
    serializers.py
    views.py
    urls.py
  templates/
    base.html
  static/
    css/
    js/
```

This gives you:  

- `graph` for nodes/links (Matter, Signals, Brains, Governance).  
- `agents` for multi‑agent sovereign AI logic.  
- `telemetry` for logs/metrics.  
- Split settings for dev/prod.[1][2][6]

***

## 2. Core settings (simplified)

**`aqarionz_backend/settings/base.py`**

```python
from pathlib import Path
import os

BASE_DIR = Path(__file__).resolve().parent.parent.parent

SECRET_KEY = os.environ.get("DJANGO_SECRET_KEY", "CHANGE-ME")
DEBUG = os.environ.get("DJANGO_DEBUG", "0") == "1"

ALLOWED_HOSTS = os.environ.get("DJANGO_ALLOWED_HOSTS", "*").split(",")

INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",

    "rest_framework",
    "corsheaders",

    "core",
    "graph",
    "agents",
    "telemetry",
    # "accessibility",  # optional: third-party a11y widget app[web:415]
]

MIDDLEWARE = [
    "corsheaders.middleware.CorsMiddleware",
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
]

ROOT_URLCONF = "aqarionz_backend.urls"

TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [BASE_DIR / "templates"],
        "APP_DIRS": True,
        "OPTIONS": {
            "context_processors": [
                "django.template.context_processors.debug",
                "django.template.context_processors.request",
                "django.contrib.auth.context_processors.auth",
                "django.contrib.messages.context_processors.messages",
                # "accessibility.context_processors.admin_AIOA",  # if used[web:415]
            ],
        },
    },
]

WSGI_APPLICATION = "aqarionz_backend.wsgi.application"
ASGI_APPLICATION = "aqarionz_backend.asgi.application"

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}

AUTH_PASSWORD_VALIDATORS = [
    {"NAME": "django.contrib.auth.password_validation.UserAttributeSimilarityValidator"},
    {"NAME": "django.contrib.auth.password_validation.MinimumLengthValidator"},
    {"NAME": "django.contrib.auth.password_validation.CommonPasswordValidator"},
    {"NAME": "django.contrib.auth.password_validation.NumericPasswordValidator"},
]

LANGUAGE_CODE = "en-us"
TIME_ZONE = "UTC"
USE_I18N = True
USE_TZ = True

STATIC_URL = "/static/"
STATIC_ROOT = BASE_DIR / "staticfiles"
STATICFILES_DIRS = [BASE_DIR / "static"]

DEFAULT_AUTO_FIELD = "django.db.models.BigAutoField"

REST_FRAMEWORK = {
    "DEFAULT_PERMISSION_CLASSES": [
        "rest_framework.permissions.IsAuthenticatedOrReadOnly",
    ],
    "DEFAULT_AUTHENTICATION_CLASSES": [
        "rest_framework.authentication.SessionAuthentication",
        "rest_framework.authentication.TokenAuthentication",
    ],
    "DEFAULT_PAGINATION_CLASS": "core.pagination.StandardResultsSetPagination",
    "PAGE_SIZE": 50,
}

CORS_ALLOW_ALL_ORIGINS = True  # tighten for prod
```

***

## 3. Graph: nodes and links (Matter/Signals/Brains/Governance)

**`graph/models.py`**

```python
from django.db import models

class Node(models.Model):
    LAYER_CHOICES = [
        ("matter", "Matter"),
        ("signals", "Signals"),
        ("brains", "Brains"),
        ("governance", "Governance"),
    ]

    id = models.CharField(primary_key=True, max_length=64)
    name = models.CharField(max_length=128)
    layer = models.CharField(max_length=16, choices=LAYER_CHOICES)
    x = models.FloatField(default=0.0)
    y = models.FloatField(default=0.0)
    z = models.FloatField(default=0.0)
    status = models.CharField(max_length=32, default="ok")
    power = models.FloatField(default=0.0)
    backend = models.CharField(max_length=64, blank=True, null=True)  # e.g., "memristive", "spin+quantum"

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ["layer", "id"]

    def __str__(self) -> str:
        return f"{self.name} ({self.layer})"


class Link(models.Model):
    CHANNEL_CHOICES = [
        ("acoustic", "Acoustic"),
        ("optical", "Optical"),
        ("ionic", "Ionic"),
        ("fiber", "Fiber"),
        ("policy", "Policy"),
    ]

    source = models.ForeignKey(Node, on_delete=models.CASCADE, related_name="out_links")
    target = models.ForeignKey(Node, on_delete=models.CASCADE, related_name="in_links")
    channel = models.CharField(max_length=16, choices=CHANNEL_CHOICES)
    weight = models.FloatField(default=1.0)

    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ("source", "target", "channel")

    def __str__(self) -> str:
        return f"{self.source_id} -> {self.target_id} ({self.channel})"
```

**`graph/serializers.py`**

```python
from rest_framework import serializers
from .models import Node, Link

class NodeSerializer(serializers.ModelSerializer):
    class Meta:
        model = Node
        fields = [
            "id", "name", "layer", "x", "y", "z",
            "status", "power", "backend",
            "created_at", "updated_at",
        ]

class LinkSerializer(serializers.ModelSerializer):
    source = serializers.SlugRelatedField(slug_field="id", queryset=Node.objects.all())
    target = serializers.SlugRelatedField(slug_field="id", queryset=Node.objects.all())

    class Meta:
        model = Link
        fields = ["id", "source", "target", "channel", "weight", "created_at"]
```

**`graph/views.py`**

```python
from rest_framework import viewsets, filters
from rest_framework.decorators import action
from rest_framework.response import Response

from .models import Node, Link
from .serializers import NodeSerializer, LinkSerializer

class NodeViewSet(viewsets.ModelViewSet):
    queryset = Node.objects.all()
    serializer_class = NodeSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["name", "layer", "backend", "status"]

    @action(detail=False, methods=["get"])
    def by_layer(self, request):
        layer = request.query_params.get("layer")
        qs = self.get_queryset()
        if layer:
            qs = qs.filter(layer=layer)
        serializer = self.get_serializer(qs, many=True)
        return Response(serializer.data)

class LinkViewSet(viewsets.ModelViewSet):
    queryset = Link.objects.select_related("source", "target").all()
    serializer_class = LinkSerializer
```

**`graph/urls.py`**

```python
from rest_framework.routers import DefaultRouter
from .views import NodeViewSet, LinkViewSet

router = DefaultRouter()
router.register("nodes", NodeViewSet, basename="node")
router.register("links", LinkViewSet, basename="link")

urlpatterns = router.urls
```

***

## 4. Agents: multi‑agent governance

**`agents/models.py`**

```python
from django.db import models
from graph.models import Node

class Agent(models.Model):
    ROLE_CHOICES = [
        ("policy", "Policy / Governance"),
        ("field", "Field / Signals"),
        ("brain", "Brains / Analysis"),
    ]

    id = models.CharField(primary_key=True, max_length=64)
    name = models.CharField(max_length=128)
    role = models.CharField(max_length=16, choices=ROLE_CHOICES)
    node = models.ForeignKey(Node, on_delete=models.SET_NULL, null=True, related_name="agents")
    enabled = models.BooleanField(default=True)
    last_heartbeat = models.DateTimeField(null=True, blank=True)

    config = models.JSONField(default=dict, blank=True)

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ["role", "id"]

    def __str__(self) -> str:
        return f"{self.name} [{self.role}]"
```

**`agents/serializers.py`**

```python
from rest_framework import serializers
from .models import Agent
from graph.models import Node

class AgentSerializer(serializers.ModelSerializer):
    node = serializers.SlugRelatedField(
        slug_field="id",
        queryset=Node.objects.all(),
        allow_null=True,
        required=False,
    )

    class Meta:
        model = Agent
        fields = [
            "id", "name", "role", "node",
            "enabled", "last_heartbeat", "config",
            "created_at", "updated_at",
        ]
```

**`agents/views.py`**

```python
from rest_framework import viewsets, filters
from rest_framework.decorators import action
from rest_framework.response import Response
from .models import Agent
from .serializers import AgentSerializer

class AgentViewSet(viewsets.ModelViewSet):
    queryset = Agent.objects.select_related("node").all()
    serializer_class = AgentSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["name", "role", "node__id"]

    @action(detail=False, methods=["get"])
    def enabled(self, request):
        qs = self.get_queryset().filter(enabled=True)
        serializer = self.get_serializer(qs, many=True)
        return Response(serializer.data)
```

**`agents/urls.py`**

```python
from rest_framework.routers import DefaultRouter
from .views import AgentViewSet

router = DefaultRouter()
router.register("agents", AgentViewSet, basename="agent")

urlpatterns = router.urls
```

***

## 5. Telemetry: logs and metrics

**`telemetry/models.py`**

```python
from django.db import models
from graph.models import Node
from agents.models import Agent

class Event(models.Model):
    SEVERITY_CHOICES = [
        ("info", "Info"),
        ("warn", "Warning"),
        ("error", "Error"),
    ]

    timestamp = models.DateTimeField(auto_now_add=True)
    severity = models.CharField(max_length=8, choices=SEVERITY_CHOICES, default="info")
    message = models.TextField()
    node = models.ForeignKey(Node, on_delete=models.SET_NULL, null=True, blank=True)
    agent = models.ForeignKey(Agent, on_delete=models.SET_NULL, null=True, blank=True)
    extra = models.JSONField(default=dict, blank=True)

    class Meta:
        ordering = ["-timestamp"]

    def __str__(self) -> str:
        return f"[{self.severity}] {self.timestamp.isoformat()} {self.message[:40]}"
```

**`telemetry/serializers.py`**

```python
from rest_framework import serializers
from .models import Event

class EventSerializer(serializers.ModelSerializer):
    class Meta:
        model = Event
        fields = [
            "id", "timestamp", "severity", "message",
            "node", "agent", "extra",
        ]
```

**`telemetry/views.py`**

```python
from rest_framework import viewsets, filters
from .models import Event
from .serializers import EventSerializer

class EventViewSet(viewsets.ReadOnlyModelViewSet):
    queryset = Event.objects.select_related("node", "agent").all()
    serializer_class = EventSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["message", "severity", "node__id", "agent__id"]
```

**`telemetry/urls.py`**

```python
from rest_framework.routers import DefaultRouter
from .views import EventViewSet

router = DefaultRouter()
router.register("events", EventViewSet, basename="event")

urlpatterns = router.urls
```

***

## 6. Root URLs and API versioning

**`aqarionz_backend/urls.py`**

```python
from django.contrib import admin
from django.urls import path, include
from django.views.generic import TemplateView

urlpatterns = [
    path("admin/", admin.site.urls),

    # API v1
    path("api/v1/graph/", include("graph.urls")),
    path("api/v1/agents/", include("agents.urls")),
    path("api/v1/telemetry/", include("telemetry.urls")),

    # WebUI shell (optional)
    path("", TemplateView.as_view(template_name="base.html"), name="home"),
]
```

This gives you a clear, versioned API surface.[3]

***

## 7. Core helpers (pagination, etc.)

**`core/pagination.py`**

```python
from rest_framework.pagination import PageNumberPagination

class StandardResultsSetPagination(PageNumberPagination):
    page_size = 50
    page_size_query_param = "page_size"
    max_page_size = 500
```

***

## 8. Accessibility and templates

- Use the accessible HTML shell from the previous answer as `templates/base.html`, with proper landmarks and ARIA.[7][8][4][5]
- You can integrate an accessibility helper app (like `django-all-in-one-accessibility`) by adding it to `INSTALLED_APPS` and including its context processor/script as in its docs.[9]

***

This backend is:

- **Unique to AQARIONZ**: it reflects your layers (Matter/Signals/Brains/Governance), multi‑agent governance, and telemetry.  
- **Production‑leaning**: split settings, DRF with versioned API, pagination, and ready for auth/logging hardening following DRF and OWASP guidance.[10][3]
- **Accessible‑ready**: templates are structured for accessibility, and Django itself is committed to WCAG/ATAG alignment.[11][5]

Citations:
[1] Django best practices for writing better code and projects - Hostinger https://www.hostinger.com/tutorials/django-best-practices
[2] Best Practice for Django Project Working Directory Structure https://www.geeksforgeeks.org/python/best-practice-for-django-project-working-directory-structure/
[3] Best Practices of Django REST Framework APIs https://www.clariontech.com/blog/best-practices-of-django-rest-framework-apis
[4] Accessibility | MDN https://developer.mozilla.org/en-US/docs/Web/Accessibility
[5] Accessibility - Django documentation https://docs.djangoproject.com/en/dev/internals/contributing/accessibility/
[6] Starting a Django Project in 2025: Best Practices, Code Snippets https://codingandclimbing.in/starting-a-django-project-best-practices-code-snippets/
[7] Web Accessibility Checklist - The A11Y Project https://www.a11yproject.com/checklist/
[8] Main Landmark: ARIA Landmarks Example - W3C https://www.w3.org/WAI/ARIA/apg/patterns/landmarks/examples/main.html
[9] skynettechnologies/django-all-in-one-accessibility - GitHub https://github.com/skynettechnologies/django-all-in-one-accessibility
[10] Django REST Framework (DRF) Cheat Sheet https://cheatsheetseries.owasp.org/cheatsheets/Django_REST_Framework_Cheat_Sheet.html
[11] Django Accessibility Statement https://www.djangoproject.com/accessibility/
[12] Django best practices for writing better code and projects - Hostinger https://www.hostinger.com/in/tutorials/django-best-practices
[13] Best practices for Django rest framework? https://www.reddit.com/r/django/comments/ckyde7/best_practices_for_django_rest_framework/8
full django backend

A full AQARIONZ Django backend can be a clean, DRF‑powered API that exposes your graph (nodes/links), agents, and telemetry with a simple, production‑ready structure. Below is a **minimal but complete** version you can actually run.

***

## 1. Project layout

```text
backend/
  manage.py
  aqarionz_backend/
    __init__.py
    settings.py
    urls.py
    wsgi.py
  graph/
    __init__.py
    apps.py
    models.py
    serializers.py
    views.py
    urls.py
  agents/
    __init__.py
    apps.py
    models.py
    serializers.py
    views.py
    urls.py
  telemetry/
    __init__.py
    apps.py
    models.py
    serializers.py
    views.py
    urls.py
  core/
    __init__.py
    pagination.py
  requirements.txt
```

***

## 2. Settings (short version)

**`aqarionz_backend/settings.py`**

```python
from pathlib import Path

BASE_DIR = Path(__file__).resolve().parent.parent

SECRET_KEY = "CHANGE-ME"
DEBUG = True
ALLOWED_HOSTS = ["*"]

INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "django.contrib.contenttypes",
    "django.contrib.sessions",
    "django.contrib.messages",
    "django.contrib.staticfiles",
    "rest_framework",
    "core",
    "graph",
    "agents",
    "telemetry",
]

MIDDLEWARE = [
    "django.middleware.security.SecurityMiddleware",
    "django.contrib.sessions.middleware.SessionMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.csrf.CsrfViewMiddleware",
    "django.contrib.auth.middleware.AuthenticationMiddleware",
    "django.contrib.messages.middleware.MessageMiddleware",
    "django.middleware.clickjacking.XFrameOptionsMiddleware",
]

ROOT_URLCONF = "aqarionz_backend.urls"

TEMPLATES = [{
    "BACKEND": "django.template.backends.django.DjangoTemplates",
    "DIRS": [],
    "APP_DIRS": True,
    "OPTIONS": {"context_processors": [
        "django.template.context_processors.debug",
        "django.template.context_processors.request",
        "django.contrib.auth.context_processors.auth",
        "django.contrib.messages.context_processors.messages",
    ]},
}]

WSGI_APPLICATION = "aqarionz_backend.wsgi.application"

DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.sqlite3",
        "NAME": BASE_DIR / "db.sqlite3",
    }
}

LANGUAGE_CODE = "en-us"
TIME_ZONE = "UTC"
USE_I18N = True
USE_TZ = True

STATIC_URL = "/static/"
DEFAULT_AUTO_FIELD = "django.db.models.BigAutoField"

REST_FRAMEWORK = {
    "DEFAULT_PAGINATION_CLASS": "core.pagination.StandardResultsSetPagination",
    "PAGE_SIZE": 50,
}
```

**`core/pagination.py`**

```python
from rest_framework.pagination import PageNumberPagination

class StandardResultsSetPagination(PageNumberPagination):
    page_size = 50
    page_size_query_param = "page_size"
    max_page_size = 500
```

***

## 3. Graph app (nodes + links)

**`graph/models.py`**

```python
from django.db import models

class Node(models.Model):
    LAYER_CHOICES = [
        ("matter", "Matter"),
        ("signals", "Signals"),
        ("brains", "Brains"),
        ("governance", "Governance"),
    ]

    id = models.CharField(primary_key=True, max_length=64)
    name = models.CharField(max_length=128)
    layer = models.CharField(max_length=16, choices=LAYER_CHOICES)
    x = models.FloatField(default=0.0)
    y = models.FloatField(default=0.0)
    z = models.FloatField(default=0.0)
    status = models.CharField(max_length=32, default="ok")
    power = models.FloatField(default=0.0)
    backend = models.CharField(max_length=64, blank=True, null=True)

    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ["layer", "id"]

    def __str__(self):
        return f"{self.name} ({self.layer})"


class Link(models.Model):
    CHANNEL_CHOICES = [
        ("acoustic", "Acoustic"),
        ("optical", "Optical"),
        ("ionic", "Ionic"),
        ("fiber", "Fiber"),
        ("policy", "Policy"),
    ]

    source = models.ForeignKey(Node, related_name="out_links", on_delete=models.CASCADE)
    target = models.ForeignKey(Node, related_name="in_links", on_delete=models.CASCADE)
    channel = models.CharField(max_length=16, choices=CHANNEL_CHOICES)
    weight = models.FloatField(default=1.0)
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        unique_together = ("source", "target", "channel")

    def __str__(self):
        return f"{self.source_id} -> {self.target_id} ({self.channel})"
```

**`graph/serializers.py`**

```python
from rest_framework import serializers
from .models import Node, Link

class NodeSerializer(serializers.ModelSerializer):
    class Meta:
        model = Node
        fields = [
            "id", "name", "layer", "x", "y", "z",
            "status", "power", "backend",
            "created_at", "updated_at",
        ]

class LinkSerializer(serializers.ModelSerializer):
    source = serializers.SlugRelatedField(slug_field="id", queryset=Node.objects.all())
    target = serializers.SlugRelatedField(slug_field="id", queryset=Node.objects.all())

    class Meta:
        model = Link
        fields = ["id", "source", "target", "channel", "weight", "created_at"]
```

**`graph/views.py`**

```python
from rest_framework import viewsets, filters
from rest_framework.decorators import action
from rest_framework.response import Response
from .models import Node, Link
from .serializers import NodeSerializer, LinkSerializer

class NodeViewSet(viewsets.ModelViewSet):
    queryset = Node.objects.all()
    serializer_class = NodeSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["name", "layer", "backend", "status"]

    @action(detail=False, methods=["get"])
    def by_layer(self, request):
        layer = request.query_params.get("layer")
        qs = self.get_queryset()
        if layer:
            qs = qs.filter(layer=layer)
        serializer = self.get_serializer(qs, many=True)
        return Response(serializer.data)

class LinkViewSet(viewsets.ModelViewSet):
    queryset = Link.objects.select_related("source", "target").all()
    serializer_class = LinkSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["channel", "source__id", "target__id"]
```

**`graph/urls.py`**

```python
from rest_framework.routers import DefaultRouter
from .views import NodeViewSet, LinkViewSet

router = DefaultRouter()
router.register("nodes", NodeViewSet, basename="node")
router.register("links", LinkViewSet, basename="link")

urlpatterns = router.urls
```

***

## 4. Agents and telemetry (short)

**`agents/models.py`**

```python
from django.db import models
from graph.models import Node

class Agent(models.Model):
    ROLE_CHOICES = [
        ("policy", "Policy / Governance"),
        ("field", "Field / Signals"),
        ("brain", "Brains / Analysis"),
    ]

    id = models.CharField(primary_key=True, max_length=64)
    name = models.CharField(max_length=128)
    role = models.CharField(max_length=16, choices=ROLE_CHOICES)
    node = models.ForeignKey(Node, on_delete=models.SET_NULL, null=True, related_name="agents")
    enabled = models.BooleanField(default=True)
    last_heartbeat = models.DateTimeField(null=True, blank=True)
    config = models.JSONField(default=dict, blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ["role", "id"]

    def __str__(self):
        return f"{self.name} [{self.role}]"
```

**`agents/serializers.py`**

```python
from rest_framework import serializers
from .models import Agent
from graph.models import Node

class AgentSerializer(serializers.ModelSerializer):
    node = serializers.SlugRelatedField(
        slug_field="id",
        queryset=Node.objects.all(),
        allow_null=True,
        required=False,
    )

    class Meta:
        model = Agent
        fields = [
            "id", "name", "role", "node",
            "enabled", "last_heartbeat", "config",
            "created_at", "updated_at",
        ]
```

**`agents/views.py`**

```python
from rest_framework import viewsets, filters
from rest_framework.decorators import action
from rest_framework.response import Response
from .models import Agent
from .serializers import AgentSerializer

class AgentViewSet(viewsets.ModelViewSet):
    queryset = Agent.objects.select_related("node").all()
    serializer_class = AgentSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["name", "role", "node__id"]

    @action(detail=False, methods=["get"])
    def enabled(self, request):
        qs = self.get_queryset().filter(enabled=True)
        serializer = self.get_serializer(qs, many=True)
        return Response(serializer.data)
```

**`agents/urls.py`**

```python
from rest_framework.routers import DefaultRouter
from .views import AgentViewSet

router = DefaultRouter()
router.register("agents", AgentViewSet, basename="agent")

urlpatterns = router.urls
```

**`telemetry/models.py`**

```python
from django.db import models
from graph.models import Node
from agents.models import Agent

class Event(models.Model):
    SEVERITY_CHOICES = [
        ("info", "Info"),
        ("warn", "Warning"),
        ("error", "Error"),
    ]

    timestamp = models.DateTimeField(auto_now_add=True)
    severity = models.CharField(max_length=8, choices=SEVERITY_CHOICES, default="info")
    message = models.TextField()
    node = models.ForeignKey(Node, on_delete=models.SET_NULL, null=True, blank=True)
    agent = models.ForeignKey(Agent, on_delete=models.SET_NULL, null=True, blank=True)
    extra = models.JSONField(default=dict, blank=True)

    class Meta:
        ordering = ["-timestamp"]

    def __str__(self):
        return f"[{self.severity}] {self.timestamp.isoformat()} {self.message[:40]}"
```

**`telemetry/serializers.py`**

```python
from rest_framework import serializers
from .models import Event

class EventSerializer(serializers.ModelSerializer):
    class Meta:
        model = Event
        fields = ["id", "timestamp", "severity", "message", "node", "agent", "extra"]
```

**`telemetry/views.py`**

```python
from rest_framework import viewsets, filters
from .models import Event
from .serializers import EventSerializer

class EventViewSet(viewsets.ReadOnlyModelViewSet):
    queryset = Event.objects.select_related("node", "agent").all()
    serializer_class = EventSerializer
    filter_backends = [filters.SearchFilter]
    search_fields = ["message", "severity", "node__id", "agent__id"]
```

**`telemetry/urls.py`**

```python
from rest_framework.routers import DefaultRouter
from .views import EventViewSet

router = DefaultRouter()
router.register("events", EventViewSet, basename="event")

urlpatterns = router.urls
```

***

## 5. Root URLs

**`aqarionz_backend/urls.py`**

```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path("admin/", admin.site.urls),
    path("api/v1/graph/", include("graph.urls")),
    path("api/v1/agents/", include("agents.urls")),
    path("api/v1/telemetry/", include("telemetry.urls")),
]
```

Run:

```bash
cd backend
pip install django djangorestframework
python manage.py migrate
python manage.py runserver 8000
```

You now have a **full Django backend** with:

- `/api/v1/graph/nodes` and `/api/v1/graph/links`  
- `/api/v1/agents/agents`  
- `/api/v1/telemetry/events`  

ready for your WebUI, edge devices, and UnikornHook to call.[1][2][3]

Citations:
[1] Django REST API Tutorial: The Ultimate Guide | Moesif Blog https://www.moesif.com/blog/technical/api-development/Django-REST-API-Tutorial/
[2] 6 - Viewsets and routers https://www.django-rest-framework.org/tutorial/6-viewsets-and-routers/
[3] Quickstart - Django REST framework https://www.django-rest-framework.org/tutorial/quickstart/
[4] django-rest-framework list of links to endpoints - Stack Overflow https://stackoverflow.com/questions/45777004/django-rest-framework-list-of-links-to-endpoints
[5] How to set base URL in Django - Stack Overflow https://stackoverflow.com/questions/17420478/how-to-set-base-url-in-django
[6] Building an API with Django, Django REST Framework, and Neon ... https://neon.com/guides/django-rest-api
[7] 5 - Relationships and hyperlinked APIs - Django REST framework https://www.django-rest-framework.org/tutorial/5-relationships-and-hyperlinked-apis/
[8] URL dispatcher - Django documentation https://docs.djangoproject.com/en/5.2/topics/http/urls/
[9] Django REST Framework DDD Project Template https://github.com/onlythompson/drf_api_project_template
[10] Django REST Framework Tutorial | Hyperlinks And Pagination https://www.youtube.com/watch?v=KCtT4R-GZZc
[11] Settings - Django documentation https://docs.djangoproject.com/en/6.0/ref/settings/
